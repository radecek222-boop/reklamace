a tohle ?

name: "Auto-cleanup photocustomer.json"

on:
  schedule:
    - cron: "0 1 * * *"  # ka≈æd√Ω den v 1:00 r√°no
  workflow_dispatch:      # umo≈æn√≠ ruƒçn√≠ spu≈°tƒõn√≠

permissions:
  contents: write

jobs:
  cleanup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Read photocustomer.json and remove old entries
        id: clean
        run: |
          file="photocustomer.json"
          echo "ƒåi≈°tƒõn√≠ souboru $file..."
          now=$(date +%s)
          tmp=$(mktemp)
          # Uchov√° pouze z√°znamy mlad≈°√≠ ne≈æ 24h
          jq "[.[] | select(.datum != null and ((($now - ( (try (fromdateiso8601?(.datum) // 0)) )) < 86400)))]" "$file" > "$tmp"
          mv "$tmp" "$file"

      - name: Commit and push if changes detected
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          if [ -n "$(git status --porcelain)" ]; then
            git add photocustomer.json
            git commit -m "üßπ Auto-cleanup photocustomer.json (older than 24 h removed)"
            git push
          else
            echo "≈Ω√°dn√© star√© z√°znamy k odstranƒõn√≠."
          fi
