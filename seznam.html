<!-- üü£üü£üü£ WGS SEZNAM REKLAMAC√ç ‚Äì DARK NEON STYLE (ƒç√°st 1/3) -->
<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Seznam reklamac√≠ ‚Äì White Glove Service</title>

<!-- üåç MAPA -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
/* üåå Z√ÅKLADN√ç POZAD√ç */
body {
  margin:0;
  font-family:"Inter",system-ui,sans-serif;
  background:radial-gradient(circle at center,#1a1a2e 0%,#0f0f1a 45%,#000 100%);
  color:#e0e0ff;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* ü™û WRAPPER */
.wrapper{
  width:100%;
  max-width:1200px;
  background:rgba(20,20,40,0.6);
  border:1px solid rgba(100,100,255,0.2);
  backdrop-filter:blur(12px);
  border-radius:18px;
  box-shadow:
    0 0 20px rgba(80,0,255,0.3),
    inset 0 0 25px rgba(0,0,100,0.2);
  margin:40px 15px;
  padding:25px 20px 40px;
  box-sizing:border-box;
}

/* üî± HLAVIƒåKA */
h1{
  text-align:center;
  font-size:2.4em;
  font-weight:900;
  color:#9d8cff;
  text-shadow:0 0 8px rgba(160,140,255,0.6),0 0 25px rgba(90,70,255,0.4);
  margin:0 0 8px;
  letter-spacing:0.5px;
}
h2{
  text-align:center;
  color:#7fd0ff;
  font-weight:500;
  font-size:1em;
  letter-spacing:2px;
  margin:0 0 30px;
  text-transform:uppercase;
}
@keyframes glowPulse{
  0%,100%{opacity:1;text-shadow:0 0 15px rgba(140,120,255,0.4);}
  50%{opacity:.9;text-shadow:0 0 30px rgba(160,120,255,0.8);}
}
h1,h2{animation:glowPulse 4s ease-in-out infinite;}

/* üîò TLAƒå√çTKA */
.actions{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:14px;
  margin-bottom:30px;
}
.btn{
  padding:12px 26px;
  border:none;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
  letter-spacing:0.5px;
  font-size:1em;
  text-decoration:none;
  color:#fff;
  transition:transform .2s,box-shadow .3s;
}
.btn:hover{transform:translateY(-2px);}

/* üü£ Zpƒõt */
.btn-back{
  background:linear-gradient(135deg,#4b3bff,#7a5cff);
  box-shadow:0 0 15px rgba(120,90,255,0.4);
}
.btn-back:hover{box-shadow:0 0 25px rgba(150,110,255,0.6);}

/* üîµ Naƒç√≠st znovu */
.btn-refresh{
  background:linear-gradient(135deg,#0090ff,#33b5ff);
  box-shadow:0 0 15px rgba(0,180,255,0.35);
}
.btn-refresh:hover{box-shadow:0 0 25px rgba(0,180,255,0.6);}

/* üü¢ Hotov√© reklamace */
.btn-green{
  background:linear-gradient(135deg,#00c774,#00ff99);
  box-shadow:0 0 15px rgba(0,255,180,0.35);
}
.btn-green:hover{box-shadow:0 0 25px rgba(0,255,180,0.6);}

/* üî∑ Pl√°n dne */
.btn-plan{
  background:linear-gradient(135deg,#0066ff,#33aaff);
  box-shadow:0 0 15px rgba(0,120,255,0.4);
}
.btn-plan:hover{box-shadow:0 0 25px rgba(0,150,255,0.6);}

/* üìã TABULKA ‚Äì tmav√Ω minimalistick√Ω styl */
table {
  width:100%;
  border-collapse:collapse;
  background:rgba(255,255,255,0.03);
  border-radius:10px;
  overflow:hidden;
  box-shadow:0 0 20px rgba(0,0,80,0.25);
}
th,td {
  padding:12px 10px;
  text-align:left;
  font-size:0.95em;
  border-bottom:1px solid rgba(120,120,255,0.1);
}
th {
  background:rgba(60,60,120,0.5);
  color:#a8b9ff;
  text-transform:uppercase;
  font-weight:700;
  letter-spacing:0.5px;
}
tr:hover{background:rgba(120,120,255,0.08);}
</style>
</head>

<body>
<div class="wrapper">
  <h1>WGS</h1>
  <h2>Seznam reklamac√≠</h2>

  <div class="actions">
    <a href="index.html" class="btn btn-back">Zpƒõt</a>
    <button id="reloadBtn" class="btn btn-refresh">Naƒç√≠st znovu</button>
    <a href="hotove.html" class="btn btn-green">Hotov√© reklamace</a>
    <button id="planBtn" class="btn btn-plan">Pl√°n dne</button>
  </div>

<!-- üü¶üü¶üü¶ DETAIL Z√ÅKAZN√çKA ‚Äì ƒå√ÅST 1/2 (vlevo texty + fotky / vpravo mapa / dole tlaƒç√≠tka) -->
<style>
#detailModal{
  position:fixed;inset:0;
  background:rgba(0,0,25,0.9);
  backdrop-filter:blur(14px);
  display:none;justify-content:center;align-items:flex-start;
  padding-top:40px;z-index:9000;
}
#detailModal.active{display:flex;}
.detail-box{
  width:96%;max-width:1100px;
  background:radial-gradient(circle at top left,#0c0c18,#05050b);
  border-radius:18px;box-shadow:0 0 25px rgba(0,255,255,0.25);
  color:#e5e9ff;padding:25px 30px;overflow-y:auto;max-height:90vh;
  font-family:"Inter",system-ui,sans-serif;
}
.detail-header{
  display:flex;justify-content:space-between;align-items:center;
  border-bottom:1px solid rgba(0,255,255,0.2);margin-bottom:15px;
}
.detail-header h3{
  margin:0;font-size:1.5em;color:#8fffcf;
  text-shadow:0 0 10px rgba(0,255,200,0.4);
}
.detail-close{
  background:linear-gradient(135deg,#ff4a4a,#e60073);
  color:#fff;border:none;border-radius:10px;
  padding:8px 14px;font-weight:600;cursor:pointer;
  box-shadow:0 0 15px rgba(255,0,100,0.4);
  animation:pulseRed 2.5s infinite alternate;
}
@keyframes pulseRed{0%{box-shadow:0 0 15px rgba(255,0,100,0.4);}
100%{box-shadow:0 0 30px rgba(255,0,120,0.8);}}

.detail-grid{
  display:grid;
  grid-template-columns:1.2fr 1fr;
  gap:25px;
}
.detail-info p{margin:4px 0;}
.detail-section{
  margin-top:12px;
  background:rgba(255,255,255,0.03);
  padding:10px;border-radius:8px;
}
.detail-section h4{margin:0 0 6px;color:#7fd0ff;}
.detail-photos{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:10px;margin-top:8px;
}
.detail-photos img{
  width:100%;height:100px;object-fit:cover;
  border-radius:8px;cursor:pointer;
  transition:transform .2s;
}
.detail-photos img:hover{transform:scale(1.05);}
.detail-map{
  border-radius:12px;overflow:hidden;min-height:300px;
  box-shadow:0 0 20px rgba(0,255,255,0.15);
}

/* üü© DLA≈ΩDICE TLAƒå√çTEK */
.detail-actions{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:12px;margin-top:25px;
}
.detail-actions button{
  border:none;border-radius:12px;padding:12px;
  font-weight:700;cursor:pointer;color:#fff;
  transition:transform .2s,box-shadow .2s;
}
.detail-actions button:hover{transform:scale(1.05);}
.btn-blue{background:linear-gradient(135deg,#0077ff,#00aaff);box-shadow:0 0 12px rgba(0,150,255,0.5);}
.btn-green{background:linear-gradient(135deg,#00c774,#00ff99);color:#000;box-shadow:0 0 12px rgba(0,255,150,0.5);}
.btn-yellow{background:linear-gradient(135deg,#ffbb33,#ffd966);color:#000;box-shadow:0 0 12px rgba(255,230,100,0.5);}
.btn-purple{background:linear-gradient(135deg,#a44aff,#d080ff);box-shadow:0 0 12px rgba(200,120,255,0.5);}
.btn-gray{background:linear-gradient(135deg,#666,#999);box-shadow:0 0 12px rgba(120,120,120,0.5);}
.btn-red{background:linear-gradient(135deg,#ff4a4a,#e60073);box-shadow:0 0 12px rgba(255,80,120,0.5);}
@media(max-width:850px){
  .detail-grid{grid-template-columns:1fr;}
  .detail-map{order:5;}
}
</style>

<div id="detailModal">
  <div class="detail-box">
    <div class="detail-header">
      <h3 id="detailName">Z√°kazn√≠k</h3>
      <button class="detail-close" onclick="closeDetail()">Zav≈ô√≠t</button>
    </div>

    <div class="detail-grid">
      <div class="detail-info">
        <p><strong>Adresa:</strong> <span id="detailAddress">‚Äì</span></p>
        <p><strong>Telefon:</strong> <span id="detailPhone">‚Äì</span></p>
        <p><strong>Email:</strong> <span id="detailEmail">‚Äì</span></p>
        <p><strong>Produkt:</strong> <span id="detailProduct">‚Äì</span></p>
        <div class="detail-section">
          <h4>Popis z√°vady</h4>
          <div id="detailDesc">‚Äì</div>
        </div>
        <div class="detail-section">
          <h4>üì∏ Fotodokumentace</h4>
          <div class="detail-photos" id="detailPhotos"></div>
        </div>
      </div>
      <div class="detail-map" id="detailMap"></div>
    </div>

    <div class="detail-actions">
      <button class="btn-blue" id="createProtocolBtn">Vytvo≈ôit protokol</button>
      <button class="btn-green" id="startVisitBtn">Zah√°jit n√°v≈°tƒõvu</button>
      <button class="btn-yellow" id="saveTermBtn">Ulo≈æit term√≠n</button>
      <button class="btn-purple" id="waitBtn">ƒåek√° na d√≠ly</button>
      <button class="btn-gray" id="contactBtn">Kontaktovat</button>
      <button class="btn-red" id="closeBtn">Zpƒõt</button>
    </div>
  </div>
</div>
<!-- üü¶üü¶üü¶ DETAIL Z√ÅKAZN√çKA ‚Äì ƒå√ÅST 2/2 (skripty + kontakt modal + foto prohl√≠≈æeƒç) -->
<style>
/* üìû Kontakt modal */
#contactModal{
  position:fixed;inset:0;background:rgba(0,0,0,0.7);
  display:none;justify-content:center;align-items:center;z-index:9500;
}
#contactModal.active{display:flex;}
.contact-box{
  background:#fff;border-radius:14px;padding:22px;text-align:center;
  width:320px;font-family:"Inter",sans-serif;box-shadow:0 0 25px rgba(0,0,0,0.4);
}
.contact-box h3{margin:0 0 10px;}
.contact-buttons{display:flex;flex-direction:column;gap:10px;margin-top:15px;}
.contact-buttons a,.contact-buttons button{
  border:none;border-radius:10px;padding:10px;font-weight:600;
  text-decoration:none;cursor:pointer;transition:transform .2s;
}
.contact-buttons a:hover,.contact-buttons button:hover{transform:scale(1.05);}
.btn-call{background:linear-gradient(135deg,#00c774,#00ff99);color:#000;}
.btn-sms{background:linear-gradient(135deg,#c74a4a,#e37070);color:#fff;}
.btn-close{background:linear-gradient(135deg,#666,#999);color:#fff;}

/* üñºÔ∏è Prohl√≠≈æeƒç fotografi√≠ */
#photoViewer{
  position:fixed;inset:0;background:rgba(0,0,0,0.85);
  display:none;justify-content:center;align-items:center;z-index:9600;
  flex-direction:column;
}
#photoViewer.active{display:flex;}
#photoViewer img{
  max-width:90%;max-height:80vh;border-radius:12px;
  box-shadow:0 0 30px rgba(0,255,255,0.3);
}
.viewer-nav{
  display:flex;gap:20px;margin-top:20px;
}
.viewer-nav button{
  background:linear-gradient(135deg,#0077ff,#00aaff);
  border:none;border-radius:10px;padding:10px 16px;
  color:#fff;font-weight:600;cursor:pointer;
  box-shadow:0 0 12px rgba(0,150,255,0.5);
  transition:transform .2s;
}
.viewer-nav button:hover{transform:scale(1.05);}
</style>

<div id="contactModal">
  <div class="contact-box">
    <h3>Kontaktovat z√°kazn√≠ka</h3>
    <p><strong id="contactName">‚Äì</strong><br><span id="contactPhone">‚Äì</span></p>
    <div class="contact-buttons">
      <a id="contactCall" class="btn-call">Kotaktovat</a>
      <a id="contactSMS" class="btn-sms">SMS ‚Äì nezved√°</a>
      <button class="btn-close" onclick="closeContact()">Zav≈ô√≠t</button>
    </div>
  </div>
</div>

<div id="photoViewer">
  <img id="viewerImage" src="">
  <div class="viewer-nav">
    <button onclick="prevPhoto()">‚óÄ P≈ôedchoz√≠</button>
    <button onclick="closePhotoViewer()">Zav≈ô√≠t</button>
    <button onclick="nextPhoto()">N√°sleduj√≠c√≠ ‚ñ∂</button>
  </div>
</div>

<script>
const WGS_HOME=[50.08031890414999,14.59812450867171];
let map,marker,currentPhotos=[],currentIndex=0;

async function openDetail(item){
  const addr=item.adresa||"",phone=item.telefon||"",desc=item.popis||"‚Äì";
  document.getElementById("detailName").textContent=item.zakaznik||"‚Äì";
  document.getElementById("detailAddress").textContent=addr;
  document.getElementById("detailPhone").textContent=phone;
  document.getElementById("detailEmail").textContent=item.email||"‚Äì";
  document.getElementById("detailProduct").textContent=item.produkt||"‚Äì";
  document.getElementById("detailDesc").textContent=desc;
  document.getElementById("detailModal").classList.add("active");

  // üì∏ Fotky
  const cont=document.getElementById("detailPhotos");
  cont.innerHTML="";
  if(Array.isArray(item.fotky)&&item.fotky.length){
    currentPhotos=item.fotky;
    item.fotky.forEach((src,i)=>{
      const img=document.createElement("img");
      img.src=src;img.onclick=()=>openPhotoViewer(i);
      cont.appendChild(img);
    });
  }else{
    cont.innerHTML="<em>Bez fotografi√≠</em>";
    currentPhotos=[];
  }

  // üó∫Ô∏è Mapa
  setTimeout(()=>{
    if(!map){
      map=L.map("detailMap").setView(WGS_HOME,10);
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:""}).addTo(map);
    }
    if(marker)map.removeLayer(marker);
    fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(addr)}`)
      .then(r=>r.json()).then(res=>{
        if(res&&res[0]){
          const lat=parseFloat(res[0].lat),lon=parseFloat(res[0].lon);
          marker=L.marker([lat,lon]).addTo(map);
          map.setView([lat,lon],12);
          const dist=getDist(WGS_HOME,[lat,lon]);
          document.getElementById("detailDistance").textContent=`${dist.toFixed(1)} km od WGS`;
        }else document.getElementById("detailDistance").textContent="Nelze zjistit polohu.";
      }).catch(()=>document.getElementById("detailDistance").textContent="Chyba p≈ôi naƒç√≠t√°n√≠ mapy.");
  },300);

  // üîò Tlaƒç√≠tka
  document.getElementById("createProtocolBtn").onclick=()=>{localStorage.setItem("protokolData",JSON.stringify(item));window.location.href="protokol.html";};
  document.getElementById("startVisitBtn").onclick=()=>{localStorage.setItem("currentCustomer",JSON.stringify(item));window.location.href="photocustomer.html";};
  document.getElementById("waitBtn").onclick=()=>alert("Stav zmƒõnƒõn na 'ƒçek√° na d√≠ly'");
  document.getElementById("saveTermBtn").onclick=()=>alert("Term√≠n ulo≈æen (zat√≠m demo)");
  document.getElementById("contactBtn").onclick=()=>openContact(item);
  document.getElementById("closeBtn").onclick=()=>closeDetail();
}

function getDist([a,b],[c,d]){
  const R=6371,dl=(c-a)*Math.PI/180,dn=(d-b)*Math.PI/180;
  const h=Math.sin(dl/2)**2+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(dn/2)**2;
  return R*2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));
}
function closeDetail(){document.getElementById("detailModal").classList.remove("active");}

/* üìû Kontakt modal */
function openContact(item){
  const modal=document.getElementById("contactModal");
  document.getElementById("contactName").textContent=item.zakaznik||"‚Äì";
  document.getElementById("contactPhone").textContent=item.telefon||"‚Äì";
  document.getElementById("contactCall").href=`tel:${item.telefon||""}`;
  const smsText=`Dobr√Ω den, pokou≈°eli jsme se V√°s kontaktovat ohlednƒõ zak√°zky ${item.produkt||""}. Pros√≠me o zpƒõtn√© kontaktov√°n√≠. Dƒõkujeme, White Glove Service.`;
  document.getElementById("contactSMS").href=`sms:${item.telefon||""}?body=${encodeURIComponent(smsText)}`;
  modal.classList.add("active");
}
function closeContact(){document.getElementById("contactModal").classList.remove("active");}

/* üñºÔ∏è Prohl√≠≈æeƒç fotografi√≠ */
function openPhotoViewer(i){if(!currentPhotos.length)return;currentIndex=i;showPhoto();}
function showPhoto(){
  const viewer=document.getElementById("photoViewer");
  const img=document.getElementById("viewerImage");
  img.src=currentPhotos[currentIndex];
  viewer.classList.add("active");
}
function closePhotoViewer(){document.getElementById("photoViewer").classList.remove("active");}
function nextPhoto(){if(!currentPhotos.length)return;currentIndex=(currentIndex+1)%currentPhotos.length;showPhoto();}
function prevPhoto(){if(!currentPhotos.length)return;currentIndex=(currentIndex-1+currentPhotos.length)%currentPhotos.length;showPhoto();}
</script>




<!-- üü© TABULKA SEZNAMU -->
<style>
/* üü¶ STAVY ≈ò√ÅDK≈Æ */
tr.new td {background:rgba(255,240,120,0.08);color:#fff176;}
tr.new td:first-child::before{content:"üü° ";}

tr.done td {background:rgba(0,180,255,0.08);color:#66ccff;}
tr.done td:first-child::before{content:"üîµ ";}

tr.cancelled td {background:rgba(255,80,80,0.08);color:#ff8080;}
tr.cancelled td:first-child::before{content:"üî¥ ";}
</style>

<table id="ordersTable">
  <thead>
    <tr>
      <th>Z√°kazn√≠k</th>
      <th>Adresa</th>
      <th>Telefon</th>
      <th>Stav</th>
    </tr>
  </thead>
  <tbody>
    <tr><td colspan="4" style="text-align:center;padding:25px;">Naƒç√≠t√°m data...</td></tr>
  </tbody>
</table>

<script>
const tableBody=document.querySelector("#ordersTable tbody");
const reloadBtn=document.getElementById("reloadBtn");
let allOrders=[];

/* üü© NAƒåTEN√ç DAT Z PHP */
async function loadOrders() {
  try {
    tableBody.innerHTML = `<tr><td colspan="4" style="text-align:center;color:#888;">üîÑ Naƒç√≠t√°m data...</td></tr>`;

    // üìÅ seznam soubor≈Ø (m√≠sto Worker endpoint≈Ø)
    const files = ["orders.json", "hotove.json", "temporaryfiles.json"];

    // üì¶ naƒçti v≈°echny soubory p≈ôes n√°≈° PHP modul
    const results = await Promise.all(files.map(f => loadData(f)));

    // üß© spoj do jednoho pole
    allOrders = results.flat().filter(Boolean);

    console.log("‚úÖ Naƒçteno z PHP:", allOrders);
    renderOrders();
  } catch (e) {
    console.error("‚ùå Chyba naƒç√≠t√°n√≠:", e);
    tableBody.innerHTML = `<tr><td colspan="4" style="text-align:center;color:#f66;">Chyba naƒç√≠t√°n√≠ dat</td></tr>`;
  }
}

/* üü© VYKRESLEN√ç TABULKY */
function renderOrders(){
  if(!allOrders.length){
    tableBody.innerHTML=`<tr><td colspan="4" style="text-align:center;color:#999;">≈Ω√°dn√© z√°znamy</td></tr>`;
    return;
  }
  tableBody.innerHTML = allOrders.map(o => {
    const item = o.data || o;
    const stav = (item.stav || "").toLowerCase();
    let cls = "";
    if (stav.includes("nov")) cls = "new";
    else if (stav.includes("domlu")) cls = "done";
    else if (stav.includes("zru")) cls = "cancelled";
    return `
      <tr class="${cls}" onclick='openDetail(${JSON.stringify(item)})'>
        <td>${item.zakaznik || "‚Äì"}</td>
        <td>${item.adresa || "‚Äì"}</td>
        <td>${item.telefon || "‚Äì"}</td>
        <td>${item.stav || "‚Äì"}</td>
      </tr>`;
  }).join("");
}

/* üîÅ TLAƒå√çTKO NAƒå√çST ZNOVU */
reloadBtn.onclick=loadOrders;

/* üöÄ START */
window.addEventListener("DOMContentLoaded",loadOrders);
</script>
<!-- üü£üü£üü£ WGS SEZNAM REKLAMAC√ç ‚Äì DARK NEON STYLE (ƒç√°st 3/3 ‚Äì Z√ÅVƒöR) -->
<style>
/* ‚ú® ANIMOVAN√â POZAD√ç */
body::before{
  content:"";
  position:fixed;inset:0;
  background:
    radial-gradient(circle at 20% 30%,rgba(0,255,180,0.08),transparent 60%),
    radial-gradient(circle at 80% 70%,rgba(120,0,255,0.08),transparent 60%),
    radial-gradient(circle at 50% 50%,rgba(0,128,255,0.05),transparent 70%);
  z-index:-1;
  animation:neonFlow 15s ease-in-out infinite alternate;
}
@keyframes neonFlow{
  0%{filter:hue-rotate(0deg);}
  50%{filter:hue-rotate(80deg);}
  100%{filter:hue-rotate(0deg);}
}

/* üü© TOOLTIP */
.tooltip{
  position:absolute;
  background:rgba(0,0,0,0.8);
  color:#9fffc7;
  padding:6px 10px;
  border-radius:6px;
  font-size:0.8em;
  pointer-events:none;
  opacity:0;
  transition:opacity .2s,transform .2s;
  transform:translateY(-6px);
  z-index:9999;
}
.tooltip.show{
  opacity:1;
  transform:translateY(0);
  box-shadow:0 0 12px rgba(0,255,120,0.4);
}

/* üü© NOTIFIKACE */
#notif{
  position:fixed;
  top:18px;left:50%;
  transform:translateX(-50%);
  background:linear-gradient(135deg,#00b56a,#00ff99);
  color:#000;
  padding:10px 20px;
  border-radius:10px;
  font-weight:700;
  box-shadow:0 0 18px rgba(0,255,120,0.4);
  opacity:0;
  transition:opacity .3s,transform .3s;
  z-index:6000;
}
#notif.show{
  opacity:1;
  transform:translate(-50%,10px);
}
#notif.error{
  background:linear-gradient(135deg,#ff5b5b,#e63946);
  color:#fff;
  box-shadow:0 0 18px rgba(255,80,80,0.5);
}

/* üü™ PODPIS / FOOTER */
.footer{
  text-align:center;
  margin:45px 0 15px;
  font-size:0.85em;
  color:#888;
  text-shadow:0 0 10px rgba(100,100,255,0.2);
}
.footer span{
  color:#9d8cff;
  font-weight:600;
}
</style>

<div id="notif"></div>

<div class="footer">
  ¬© 2025 <span>White Glove Service s.r.o.</span> ¬∑ Neon WGS Interface v 2.0
</div>

<script>
/* üü© FUNKCE ‚Äì NOTIFIKACE */
function showNotif(type="ok",text="Hotovo"){
  const n=document.getElementById("notif");
  n.textContent=text;
  n.className=type==="error"?"error show":"show";
  clearTimeout(window._notifTimer);
  window._notifTimer=setTimeout(()=>n.classList.remove("show"),2500);
}

/* üü© FUNKCE ‚Äì TOOLTIP */
let tooltip;
document.addEventListener("mouseover",e=>{
  const t=e.target.closest("[data-tip]");
  if(!t)return;
  tooltip=document.createElement("div");
  tooltip.className="tooltip";
  tooltip.textContent=t.dataset.tip;
  document.body.appendChild(tooltip);
  const r=t.getBoundingClientRect();
  tooltip.style.left=r.left+r.width/2+"px";
  tooltip.style.top=r.top-30+"px";
  requestAnimationFrame(()=>tooltip.classList.add("show"));
});
document.addEventListener("mouseout",()=>{
  if(tooltip){tooltip.remove();tooltip=null;}
});

/* üü© P≈òESMƒöROV√ÅN√ç NA PL√ÅN DNE */
const planBtn=document.getElementById("planBtn");
if(planBtn){
  planBtn.addEventListener("click",()=>{
    sessionStorage.setItem("fromPlanDne","1");
    window.location.href="plandne.html";
  });
}

/* üü© OBNOVEN√ç SEZNAMU PO N√ÅVRATU Z PL√ÅNU DNE */
window.addEventListener("DOMContentLoaded",()=>{
  if(sessionStorage.getItem("fromPlanDne")==="1"){
    sessionStorage.removeItem("fromPlanDne");
    if(typeof loadOrders==="function") loadOrders();
    showNotif("ok","Seznam obnoven po n√°vratu z Pl√°nu dne");
  }
});
</script>
</div>
</body>
</html>
