<!-- üü¢ ZAƒå√ÅTEK ƒå√ÅSTI 1/2 ‚Äì NOV√Å REKLAMACE (Green-Neon styl 2025) -->
<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Nov√° reklamace ‚Äì White Glove Service</title>

<!-- üìç Leaflet mapa -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

<style>
/* üåå Green-Neon pozad√≠ */
html,body{
  margin:0;height:100%;
  font-family:"Inter",system-ui,sans-serif;
  background:#0e1614;
  color:#e6fff7;
  display:flex;justify-content:center;align-items:flex-start;
  overflow-x:hidden;
}
body::before{
  content:"";
  position:fixed;inset:0;
  background:
    radial-gradient(circle at 25% 20%,#00b56a55,#0e1614 60%),
    radial-gradient(circle at 80% 80%,#00e0a650,#0e1614 70%);
  background-blend-mode:screen;
  filter:blur(80px);
  animation:moveBg 12s ease-in-out infinite alternate;
  z-index:-2;
}
@keyframes moveBg{0%{transform:translate(-3%,-3%);}100%{transform:translate(3%,3%);}}

/* üßä Wrapper */
.wrapper{
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:20px;
  backdrop-filter:blur(20px);
  box-shadow:0 0 35px rgba(0,255,170,0.2);
  padding:40px 30px;
  margin:50px 15px 100px;
  width:100%;
  max-width:1100px; /* üí° Opraveno ‚Äì d≈ô√≠ve 780px */
  box-sizing:border-box;
  animation:fadeIn .8s ease;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

/* üè∑Ô∏è Nadpisy */
h1,h2{text-align:center;margin:0 0 20px;}
h1{
  font-size:2.6em;
  font-weight:900;
  letter-spacing:-1px;
  background:linear-gradient(90deg,#00d084,#00b56a);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
h2{
  font-size:1.1em;
  font-weight:500;
  color:#aefcd8;
  margin-bottom:30px;
  text-transform:uppercase;
}

/* üì± Mobiln√≠ √∫prava ‚Äì zmen≈°en√≠ h1 (White Glove Service) */
@media (max-width:600px){
  h1{
    font-size:2.2em;
    letter-spacing:-0.5px;
  }
}

/* üßæ Formul√°≈ô */
label{display:block;font-weight:600;margin-top:15px;margin-bottom:5px;color:#e6fff7;}
input,textarea,select{
  width:100%;
  padding:12px;
  font-size:1em;
  border:none;
  border-radius:10px;
  background:rgba(255,255,255,0.08);
  color:#fff;
  outline:none;
  box-shadow:inset 0 0 6px rgba(0,0,0,0.4);
  transition:border .2s,box-shadow .2s,background .3s;
}
input:focus,textarea:focus,select:focus{
  background:rgba(255,255,255,0.12);
  box-shadow:0 0 0 2px #00b56a88;
}
textarea{height:100px;resize:vertical;}
small{font-size:0.8em;color:#aaa;}

/* üîò Tlaƒç√≠tka */
.btn{
  display:inline-block;
  padding:12px 28px;
  border-radius:10px;
  font-weight:600;
  border:none;
  color:#fff;
  cursor:pointer;
  font-size:1em;
  transition:transform .15s ease-in-out,opacity .25s;
  box-shadow:0 0 12px rgba(0,255,170,0.3);
}
.btn:hover{transform:scale(1.05);opacity:0.9;}
.btn-back{background:linear-gradient(135deg,#555,#777);}
.btn-send{background:linear-gradient(135deg,#00b56a,#00e0a6);}

/* üìç Mapa a n√°vrhy */
.address-wrapper{position:relative;}
.suggestions{
  position:absolute;top:100%;left:0;width:100%;
  background:rgba(20,30,25,0.95);
  border:1px solid rgba(255,255,255,0.1);
  border-radius:10px;
  box-shadow:0 0 20px rgba(0,0,0,0.4);
  max-height:180px;overflow-y:auto;z-index:1000;
}
.suggestions div{padding:8px;cursor:pointer;color:#eee;}
.suggestions div:hover{background:rgba(0,255,170,0.1);}
#mapPreview{
  width:100%;height:250px;margin-top:10px;border-radius:14px;
  overflow:hidden;box-shadow:0 0 20px rgba(0,0,0,0.3);
}
</style>
</head>

<body>
  <div class="wrapper">
    <h1>WHITE GLOVE SERVICE</h1>
    <h2>Nov√° reklamace</h2>

    <form id="reklamaceForm" novalidate>
      <label>ƒå√≠slo reklamace / objedn√°vky:</label>
      <input type="text" name="cislo" value="Nov√° reklamace" readonly />

      <label>Z√°kazn√≠k:</label>
      <input type="text" name="zakaznik" required placeholder="nap≈ô. Ji≈ô√≠ Nov√°k" />

      <label>Ulice a ƒç√≠slo popisn√©:</label>
      <div class="address-wrapper">
        <input type="text" id="ulice" name="ulice" required placeholder="nap≈ô. Vinohradsk√° 120" />
        <div id="suggestions" class="suggestions"></div>
      </div>
      <div id="mapPreview"></div>

      <label>Mƒõsto:</label>
      <input type="text" id="mesto" name="mesto" required placeholder="nap≈ô. Praha" />

      <label>PSƒå:</label>
      <input type="text" id="psc" name="psc" required pattern="\\d{3}\\s?\\d{2}" placeholder="nap≈ô. 110 00" />

      <label>Telefon:</label>
      <div style="display:flex;gap:10px;align-items:center;">
        <select id="predvolba" style="max-width:130px;background:rgba(255,255,255,0.08);border:none;border-radius:10px;color:#fff;padding:10px;">
          <option value="+420">üá®üáø +420</option>
          <option value="+421">üá∏üá∞ +421</option>
          <option value="+43">üá¶üáπ +43</option>
        </select>
        <input type="tel" id="telefon" name="telefon" required placeholder="nap≈ô. 777123456" />
      </div>

      <label>E-mail:</label>
      <input type="email" id="email" name="email" required placeholder="nap≈ô. info@firma.cz" />

      <label>Model / N√°zev produktu:</label>
      <input type="text" name="produkt" required placeholder="nap≈ô. C142" />

      <label>Popis z√°vady / po≈æadavku:</label>
      <textarea name="popis" required placeholder="Popi≈°te probl√©m, opravu nebo po≈æadavek..."></textarea>
<!-- üü¢ KONEC ƒå√ÅSTI 1/2 ‚Äì pokraƒçov√°n√≠ v ƒç√°sti 2/2 -->

<!-- üü¢ ZAƒå√ÅTEK ƒå√ÅSTI 2/2 ‚Äì FOTKY, ODESL√ÅN√ç A FOOTER (Green-Neon styl) -->

<!-- üñºÔ∏è Fotodokumentace -->
<div class="photo-frame">
  <div class="photo-frame__header">
    <div class="photo-frame__title">Fotodokumentace</div>
    <button type="button" id="openPhotoModal" class="btn-photo">üì∏ Nahr√°t fotografie</button>
  </div>
  <div class="photo-frame__info">Max. 5 fotografi√≠ (JPG, PNG, HEIC)</div>
  <div id="photoPreviewMain" class="photo-preview-main"></div>
</div>

<!-- Modal nahr√°v√°n√≠ -->
<div id="photoModal" class="photo-modal">
  <div class="photo-modal-content">
    <h3>Nahr√°t fotografie</h3>
    <p class="photo-small">
      M≈Ø≈æe≈° nahr√°t a≈æ 5 fotografi√≠ (JPG, PNG, HEIC).  
      Ka≈æd√° se automaticky zmen≈°√≠ na max. 800√ó533 px (‚â§ 500 KB).
    </p>

    <div id="photoPreview" class="photo-preview"></div>

    <div class="photo-modal-actions">
      <button type="button" id="selectFiles" class="btn-gray">Vyber soubory</button>
      <input type="file" id="photoInput" accept="image/jpeg,image/png,image/heic" multiple hidden>
      <button type="button" id="closePhotoModal" class="btn-white">Zav≈ô√≠t</button>
    </div>
  </div>
</div>

<style>
/* üñºÔ∏è Fotky */
.photo-frame{
  border:1px solid rgba(255,255,255,0.1);
  border-radius:14px;
  padding:18px;
  margin-top:20px;
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(10px);
}
.photo-frame__header{display:flex;justify-content:space-between;align-items:center;}
.photo-frame__title{font-weight:700;font-size:1.05em;color:#e6fff7;}
.btn-photo{
  padding:8px 18px;border:none;border-radius:10px;
  background:linear-gradient(135deg,#00b56a,#00e0a6);
  color:#fff;font-weight:600;cursor:pointer;
  box-shadow:0 0 15px rgba(0,255,170,0.3);
  transition:transform .15s ease,opacity .2s;
}
.btn-photo:hover{transform:scale(1.05);opacity:0.9;}
.photo-frame__info{font-size:0.8em;color:#bbb;margin-top:4px;}
.photo-preview-main{display:flex;flex-direction:column;gap:8px;margin-top:10px;}
.photo-item-main{display:flex;align-items:center;gap:10px;}
.photo-thumb{width:80px;height:80px;border-radius:10px;object-fit:cover;}
.photo-name{font-size:0.8em;color:#ccc;}
.photo-remove{
  background:rgba(255,255,255,0.1);
  border:none;border-radius:50%;width:24px;height:24px;
  color:#ff4d4d;cursor:pointer;
}

/* üì∏ Modal */
.photo-modal{
  display:none;position:fixed;inset:0;
  background:rgba(0,0,0,0.7);backdrop-filter:blur(10px);
  justify-content:center;align-items:center;z-index:9999;
}
.photo-modal.active{display:flex;}
.photo-modal-content{
  background:rgba(20,30,25,0.95);
  border-radius:16px;padding:24px;
  max-width:700px;width:90%;color:#fff;text-align:center;
}
.photo-small{font-size:0.8em;color:#aaa;margin-bottom:12px;}
.photo-preview{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;}
.photo-item{width:100px;height:100px;border-radius:10px;overflow:hidden;position:relative;background:rgba(255,255,255,0.08);}
.photo-item img{width:100%;height:100%;object-fit:cover;}
.progress-bar{position:absolute;bottom:0;left:0;height:5px;background:linear-gradient(90deg,#00b56a,#00e0a6);width:0%;}
</style>

<script>
const selectFiles=document.getElementById("selectFiles");
const photoInput=document.getElementById("photoInput");
const photoModal=document.getElementById("photoModal");
const photoPreview=document.getElementById("photoPreview");
const photoPreviewMain=document.getElementById("photoPreviewMain");

window.uploadedPhotos=[];
selectFiles.onclick=()=>photoInput.click();
document.getElementById("openPhotoModal").onclick=()=>photoModal.classList.add("active");
document.getElementById("closePhotoModal").onclick=()=>photoModal.classList.remove("active");

photoInput.addEventListener("change",async()=>{
  const files=Array.from(photoInput.files);
  if(!files.length)return;
  photoPreview.innerHTML="";
  for(const file of files.slice(0,5)){
    const wrap=document.createElement("div");
    wrap.className="photo-item";
    const img=document.createElement("img");
    const bar=document.createElement("div");
    bar.className="progress-bar";
    wrap.append(img,bar);photoPreview.append(wrap);
    const reader=new FileReader();
    reader.onload=e=>img.src=e.target.result;reader.readAsDataURL(file);
    const blob=await compressImage(file);
    await uploadAndPreview(blob,file,wrap,img);
  }
  photoModal.classList.remove("active");
  renderMainPreview();
});

async function compressImage(file,maxSizeKB=500,maxDim=800){
  const img=await createImageBitmap(file);
  const c=document.createElement("canvas");
  let[w,h]=[img.width,img.height];
  if(w>h&&w>maxDim){h=Math.round(h*(maxDim/w));w=maxDim;}
  else if(h>w&&h>maxDim){w=Math.round(w*(maxDim/h));h=maxDim;}
  c.width=w;c.height=h;const ctx=c.getContext("2d");
  ctx.drawImage(img,0,0,w,h);
  let q=0.9,blob=await new Promise(r=>c.toBlob(r,"image/jpeg",q));
  while(blob.size/1024>maxSizeKB&&q>0.4){q-=0.1;blob=await new Promise(r=>c.toBlob(r,"image/jpeg",q));}
  return blob;
}
async function uploadAndPreview(blob,file,wrap,img){
  const form=new FormData();form.append("file",blob,file.name);
  try{
    const r=await fetch("https://wgs-token.72nvwf4pb2.workers.dev/upload",{method:"POST",body:form});
    const res=await r.json();
    wrap.querySelector(".progress-bar").style.width="100%";
    window.uploadedPhotos.push({filename:res.filename,name:file.name,preview:img.src});
  }catch(e){console.error("‚ùå Upload selhal:",e);}
}
function renderMainPreview(){
  photoPreviewMain.innerHTML="";
  window.uploadedPhotos.forEach((p,i)=>{
    const row=document.createElement("div");
    row.className="photo-item-main";
    const img=document.createElement("img");img.className="photo-thumb";img.src=p.preview;
    const name=document.createElement("div");name.className="photo-name";name.textContent=p.name;
    const remove=document.createElement("button");remove.className="photo-remove";remove.textContent="√ó";
    remove.onclick=()=>{window.uploadedPhotos.splice(i,1);renderMainPreview();};
    row.append(img,name,remove);photoPreviewMain.append(row);
  });
}
</script>

<!-- üíæ Odesl√°n√≠ -->
<div class="actions">
  <a href="index.html" class="btn btn-back">‚üµ Zpƒõt</a>
  <button type="submit" class="btn btn-send">Odeslat</button>
</div>

<style>
.actions{display:flex;justify-content:center;gap:16px;margin:35px 0;}
</style>

<!-- ‚úÖ Overlay animace -->
<div class="wait-overlay" id="waitOverlay">
  <div class="spinner"></div>
  <p>Odes√≠l√°m data‚Ä¶</p>
</div>
<div class="success-check" id="successCheck">
  <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
    <circle cx="26" cy="26" r="25" fill="none"/>
    <path fill="none" d="M14 27l7 7 16-16" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
  <div class="check-text">Odesl√°no √∫spƒõ≈°nƒõ!</div>
</div>

<style>
.wait-overlay,.success-check{display:none;position:fixed;inset:0;justify-content:center;align-items:center;flex-direction:column;backdrop-filter:blur(10px);z-index:5000;}
.wait-overlay{background:rgba(10,20,15,0.8);color:#fff;font-weight:600;}
.success-check{background:rgba(10,20,15,0.8);color:#aefcd8;font-weight:700;}
.wait-overlay.active,.success-check.active{display:flex;}
.spinner{
  border:5px solid rgba(255,255,255,0.1);
  border-top:5px solid #00e0a6;
  border-radius:50%;width:55px;height:55px;
  animation:spin 1s linear infinite;margin-bottom:14px;
}
@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
.checkmark{width:90px;height:90px;stroke:#00e0a6;stroke-width:3;fill:none;stroke-dasharray:48;stroke-dashoffset:48;animation:draw 1s ease forwards;margin-bottom:12px;}
@keyframes draw{to{stroke-dashoffset:0;}}
</style>

<script>
document.getElementById("aftersalesForm").addEventListener("submit",async e=>{
  e.preventDefault();
  const wait=document.getElementById("waitOverlay");
  const done=document.getElementById("successCheck");
  wait.classList.add("active");
  const f=e.target;
  const pred=f.querySelector("#predvolba");
  const data={
    type:"aftersales",
    cislo:"POZARUCNI-"+Date.now(),
    zakaznik:f.zakaznik.value,
    adresa:`${f.ulice.value}, ${f.mesto.value}, ${f.psc.value}`,
    telefon:`${pred.value} ${f.telefon.value}`,
    email:f.email.value,
    produkt:f.produkt.value,
    popis:f.popis.value,
    fotky:(window.uploadedPhotos||[]).map(p=>p.filename||"")
  };
  try{
    await fetch("https://wgs-token.72nvwf4pb2.workers.dev/temporaryfiles",{
      method:"POST",headers:{"Content-Type":"application/json"},
      body:JSON.stringify({record:data})
    });
    wait.classList.remove("active");
    done.classList.add("active");
    setTimeout(()=>window.location.href="index.html",2500);
  }catch(err){
    wait.classList.remove("active");
    alert("Chyba p≈ôi odes√≠l√°n√≠: "+err.message);
  }
});
</script>

<footer class="footer">
  <div>¬© 2025 White Glove Service s.r.o.</div>
  <div>specializovan√Ω autorizovan√Ω servis Natuzzi</div>
</footer>

<style>
.footer{text-align:center;color:#aaa;font-size:0.85em;padding:30px 0 20px;opacity:0.7;}
.footer:hover{opacity:1;color:#cfc;}
</style>
</form>
</div>
</body>
</html>
<!-- üü¢ KONEC ƒå√ÅSTI 2/2 ‚Äì FOTKY, ODESL√ÅN√ç A FOOTER -->
