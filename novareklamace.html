<!-- üü£ ZAƒå√ÅTEK ƒå√ÅSTI 1/10 ‚Äì NOV√Å REKLAMACE (modern√≠ styl WGS 2025) -->
<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Nov√° reklamace ‚Äì White Glove Service</title>

<!-- üìç Leaflet mapa -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

<!-- üìÖ Vanilla Calendar -->
<link rel="stylesheet" href="vanilla-calendar.min.css">
<script src="vanilla-calendar.min.js"></script>

<style>
/* üåå Modern√≠ glass-neon styl (modro-fialov√© pozad√≠) */
html, body {
  height:100%;
  margin:0;
  font-family:"Inter",system-ui,sans-serif;
  overflow-x:hidden;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  background:#121218;
  color:#fff;
}
body::before {
  content:"";
  position:fixed;
  inset:0;
  background:radial-gradient(circle at 20% 20%,#3720a0,#121218 60%),
             radial-gradient(circle at 80% 80%,#00bfff55,#121218 70%);
  background-blend-mode:screen;
  filter:blur(80px);
  animation:bgMove 12s ease-in-out infinite alternate;
  z-index:-2;
}
@keyframes bgMove {
  0%{transform:translate(-5%,-5%) scale(1);}
  100%{transform:translate(5%,5%) scale(1.15);}
}

/* üßä Wrapper ‚Äì glass box */
.wrapper {
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(20px);
  border:1px solid rgba(255,255,255,0.1);
  box-shadow:0 0 40px rgba(0,0,0,0.4);
  border-radius:20px;
  padding:40px 30px;
  margin:50px 15px 100px;
  width:100%;
  max-width:780px;
  box-sizing:border-box;
  animation:fadeIn .8s ease;
}
@keyframes fadeIn {from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

/* üè∑Ô∏è Nadpisy */
h1,h2{text-align:center;margin:0 0 20px;}
h1{
  font-size:2.6em;
  font-weight:900;
  letter-spacing:-1px;
  background:linear-gradient(90deg,#7b68ee,#00bfff);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
h2{
  font-size:1.1em;
  font-weight:500;
  color:#cfd3ff;
  margin-bottom:30px;
  text-transform:uppercase;
}

/* üßæ Z√°klad formul√°≈ôe */
label{display:block;font-weight:600;margin-top:15px;margin-bottom:5px;color:#fff;}
input,textarea,select{
  width:100%;
  padding:12px;
  font-size:1em;
  border:none;
  border-radius:10px;
  background:rgba(255,255,255,0.08);
  color:#fff;
  outline:none;
  box-shadow:inset 0 0 6px rgba(0,0,0,0.4);
  transition:border .2s,box-shadow .2s,background .3s;
}
input:focus,textarea:focus,select:focus{
  background:rgba(255,255,255,0.12);
  box-shadow:0 0 0 2px #7b68ee88;
}
textarea{height:100px;resize:vertical;}
small{font-size:0.8em;color:#aaa;}

/* üîò Tlaƒç√≠tka z√°klad */
.btn {
  display:inline-block;
  padding:12px 28px;
  border-radius:10px;
  font-weight:600;
  border:none;
  color:#fff;
  cursor:pointer;
  font-size:1em;
  transition:transform .15s ease-in-out,opacity .25s;
  box-shadow:0 0 12px rgba(123,104,238,0.3);
}
.btn:hover{transform:scale(1.05);opacity:0.9;}
.btn-back{background:linear-gradient(135deg,#555,#777);}
.btn-send{background:linear-gradient(135deg,#7b68ee,#00bfff);}

/* üìç Mapov√Ω n√°hled a n√°vrhy */
.address-wrapper{position:relative;}
.suggestions{
  position:absolute;top:100%;left:0;width:100%;
  background:rgba(30,30,40,0.95);
  border:1px solid rgba(255,255,255,0.1);
  border-radius:10px;
  box-shadow:0 0 20px rgba(0,0,0,0.4);
  max-height:180px;overflow-y:auto;z-index:1000;
}
.suggestions div{padding:8px;cursor:pointer;color:#eee;}
.suggestions div:hover{background:rgba(255,255,255,0.08);}
#mapPreview{
  width:100%;height:260px;margin-top:10px;border-radius:14px;
  overflow:hidden;box-shadow:0 0 20px rgba(0,0,0,0.3);
}

/* ‚ú® Efekty */
@keyframes pulseGlow{
  0%,100%{box-shadow:0 0 10px rgba(123,104,238,0.3);}
  50%{box-shadow:0 0 25px rgba(123,104,238,0.6);}
}
</style>
</head>

<body>
  <div class="wrapper">
    <h1>WHITE GLOVE SERVICE</h1>
    <h2>Nov√° reklamace</h2>

    <form id="reklamaceForm" novalidate>
      <label>ƒå√≠slo reklamace / objedn√°vky:</label>
      <input type="text" name="cislo" required placeholder="nap≈ô. NBU25" />

      <label>Z√°kazn√≠k:</label>
      <input type="text" name="zakaznik" required placeholder="nap≈ô. Ji≈ô√≠ Nov√°k" />

      <label>Ulice a ƒç√≠slo popisn√©:</label>
      <div class="address-wrapper">
        <input type="text" id="ulice" name="ulice" required placeholder="nap≈ô. Vinohradsk√° 120" />
        <div id="suggestions" class="suggestions"></div>
      </div>
      <div id="mapPreview"></div>

      <label>Mƒõsto:</label>
      <input type="text" id="mesto" name="mesto" required placeholder="nap≈ô. Praha" />

      <label>PSƒå:</label>
      <input type="text" id="psc" name="psc" required pattern="\\d{3}\\s?\\d{2}" placeholder="nap≈ô. 110 00" />
<!-- üü£ KONEC ƒå√ÅSTI 1/10 -->
<!-- üü£ ZAƒå√ÅTEK ƒå√ÅSTI 2/10 ‚Äì TELEFON, EMAIL, PRODUKT + KALEND√Å≈òE -->
      <label>Telefon:</label>
      <div style="display:flex;gap:10px;align-items:center;">
        <select id="predvolba" style="max-width:130px;background:rgba(255,255,255,0.08);border:none;border-radius:10px;color:#fff;padding:10px;">
          <option value="+420">üá®üáø +420</option>
          <option value="+421">üá∏üá∞ +421</option>
          <option value="+43">üá¶üáπ +43</option>
        </select>
        <input type="tel" id="telefon" name="telefon" required placeholder="nap≈ô. 777123456" />
      </div>

      <label>E-mail:</label>
      <input type="email" id="email" name="email" required placeholder="nap≈ô. info@firma.cz" />

      <label>Model / N√°zev produktu:</label>
      <input type="text" name="produkt" required placeholder="nap≈ô. C142" />

<!-- üìÖ KALEND√Å≈òE (modern√≠ glass styl) -->
<div class="date-banners">
  <div class="date-banner">
    <div class="date-banner__label">Datum dod√°n√≠</div>
    <div class="date-banner__controls">
      <input type="hidden" id="datum_pozadavek" name="datum_prodeje" required />
      <button type="button" id="btnPozadavek" class="btn-date">Vyber datum</button>
      <span id="lblPozadavek" class="date-selected">‚Äì</span>
    </div>
  </div>

  <div class="date-banner">
    <div class="date-banner__label">Datum reklamace</div>
    <div class="date-banner__controls">
      <input type="hidden" id="datum_navsteva" name="datum_reklamace" required />
      <button type="button" id="btnNavsteva" class="btn-date">Vyber datum</button>
      <span id="lblNavsteva" class="date-selected">‚Äì</span>
    </div>
  </div>
</div>

<style>
.date-banners {
  display:grid;
  grid-template-columns:1fr;
  gap:16px;
  margin:22px 0;
}
@media(min-width:640px){.date-banners{grid-template-columns:1fr 1fr;}}
.date-banner {
  border:1px solid rgba(255,255,255,0.1);
  border-radius:12px;
  background:rgba(255,255,255,0.05);
  padding:16px;
  backdrop-filter:blur(10px);
  box-shadow:inset 0 0 10px rgba(0,0,0,0.2);
}
.date-banner__label{font-weight:700;color:#fff;margin-bottom:8px;}
.date-banner__controls{display:flex;align-items:center;gap:10px;}
.btn-date {
  padding:8px 14px;
  border-radius:8px;
  border:none;
  background:linear-gradient(135deg,#7b68ee,#00bfff);
  color:#fff;font-weight:600;cursor:pointer;
  box-shadow:0 0 12px rgba(0,191,255,0.3);
  transition:transform .15s ease,opacity .2s ease;
}
.btn-date:hover{transform:scale(1.05);opacity:.9;}
.date-selected{
  min-width:110px;display:inline-block;padding:6px 10px;
  border-radius:8px;border:1px dashed rgba(255,255,255,0.2);
  background:rgba(255,255,255,0.08);
  color:#fff;text-align:center;font-weight:600;
}
.calendar-modal{
  position:fixed;inset:0;background:rgba(0,0,0,0.7);
  display:none;justify-content:center;align-items:center;
  z-index:9999;backdrop-filter:blur(8px);
}
.calendar-modal.active{display:flex;}
.calendar-content{
  background:rgba(30,30,40,0.95);
  border-radius:16px;padding:20px;
  box-shadow:0 0 30px rgba(0,0,0,0.6);
  width:min(480px,92vw);
}
.calendar-controls{
  display:flex;justify-content:center;align-items:center;
  gap:10px;margin-bottom:8px;
}
.btn-calnav{
  background:rgba(255,255,255,0.08);
  border:none;border-radius:6px;
  width:30px;height:30px;font-weight:bold;
  color:#fff;cursor:pointer;
  transition:background .2s;
}
.btn-calnav:hover{background:rgba(255,255,255,0.15);}
#monthLabel{font-weight:700;font-size:1.1em;min-width:120px;text-align:center;}
#yearSelect{
  background:rgba(255,255,255,0.08);
  border:none;border-radius:8px;
  color:#fff;padding:4px 6px;
}
#calendarDays{
  display:grid;grid-template-columns:repeat(7,1fr);
  gap:4px;text-align:center;font-weight:600;font-size:0.9em;
  color:#eee;
}
.day-cell{
  padding:8px;border-radius:6px;cursor:pointer;
  transition:background .2s,color .2s;
}
.day-cell:hover{background:rgba(255,255,255,0.1);}
.day-cell.today{background:rgba(0,191,255,0.2);}
.day-cell.selected{background:#00b56a;color:white;}
.btn-date.close-btn{
  background:linear-gradient(135deg,#555,#777);
  margin-top:14px;width:100%;
}
</style>

<div id="calendarModal" class="calendar-modal">
  <div class="calendar-content">
    <div id="vanillaCalendar"></div>
    <div class="calendar-controls">
      <button id="prevMonth" class="btn-calnav">‚Äπ</button>
      <span id="monthLabel"></span>
      <select id="yearSelect"></select>
      <button id="nextMonth" class="btn-calnav">‚Ä∫</button>
    </div>
    <div id="calendarDays"></div>
    <button id="closeCalendar" type="button" class="btn-date close-btn">Zav≈ô√≠t</button>
  </div>
</div>

<script>
(function(){
  let targetHidden=null,targetLabel=null;
  const modal=document.getElementById("calendarModal");
  const btnClose=document.getElementById("closeCalendar");
  const btnPozadavek=document.getElementById("btnPozadavek");
  const btnNavsteva=document.getElementById("btnNavsteva");
  const lblPozadavek=document.getElementById("lblPozadavek");
  const lblNavsteva=document.getElementById("lblNavsteva");
  const inputPozadavek=document.getElementById("datum_pozadavek");
  const inputNavsteva=document.getElementById("datum_navsteva");
  const monthLabel=document.getElementById("monthLabel");
  const yearSelect=document.getElementById("yearSelect");
  const daysContainer=document.getElementById("calendarDays");
  const months=["Leden","√önor","B≈ôezen","Duben","Kvƒõten","ƒåerven","ƒåervenec","Srpen","Z√°≈ô√≠","≈ò√≠jen","Listopad","Prosinec"];
  let current=new Date();
  const currentYear=new Date().getFullYear();
  for(let y=currentYear-5;y<=currentYear+1;y++){
    const opt=document.createElement("option");
    opt.value=y;opt.textContent=y;
    if(y===current.getFullYear())opt.selected=true;
    yearSelect.appendChild(opt);
  }
  function renderCalendar(){
    monthLabel.textContent=months[current.getMonth()];
    yearSelect.value=current.getFullYear();
    daysContainer.innerHTML="";
    const firstDay=new Date(current.getFullYear(),current.getMonth(),1);
    const startDay=(firstDay.getDay()+6)%7;
    const daysInMonth=new Date(current.getFullYear(),current.getMonth()+1,0).getDate();
    for(let i=0;i<startDay;i++){const empty=document.createElement("div");daysContainer.appendChild(empty);}
    for(let d=1;d<=daysInMonth;d++){
      const btn=document.createElement("div");
      btn.className="day-cell";
      btn.textContent=d;
      const iso=`${current.getFullYear()}-${String(current.getMonth()+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
      btn.dataset.day=iso;
      const todayISO=new Date().toISOString().split("T")[0];
      if(iso===todayISO)btn.classList.add("today");
      btn.onclick=()=>{
        if(!targetHidden||!targetLabel)return;
        targetHidden.value=iso;
        targetLabel.textContent=iso;
        modal.classList.remove("active");
      };
      daysContainer.appendChild(btn);
    }
  }
  document.getElementById("prevMonth").onclick=()=>{current.setMonth(current.getMonth()-1);renderCalendar();};
  document.getElementById("nextMonth").onclick=()=>{current.setMonth(current.getMonth()+1);renderCalendar();};
  yearSelect.onchange=()=>{current.setFullYear(parseInt(yearSelect.value));renderCalendar();};
  function openCalendar(forHidden,forLabel){targetHidden=forHidden;targetLabel=forLabel;renderCalendar();modal.classList.add("active");}
  btnPozadavek.onclick=e=>{e.preventDefault();openCalendar(inputPozadavek,lblPozadavek);};
  btnNavsteva.onclick=e=>{e.preventDefault();openCalendar(inputNavsteva,lblNavsteva);};
  btnClose.onclick=()=>modal.classList.remove("active");
  modal.onclick=e=>{if(e.target===modal)modal.classList.remove("active");};
})();
</script>
<!-- üü£ KONEC ƒå√ÅSTI 2/10 -->
<!-- üü£ ZAƒå√ÅTEK ƒå√ÅSTI 3/10 ‚Äì POPIS Z√ÅVADY + FOTODOKUMENTACE (modern√≠ styl) -->

<label>Popis z√°vady:</label>
<textarea name="popis" required placeholder="Popi≈°te z√°vadu nebo probl√©m..."></textarea>

<!-- üñºÔ∏è Fotodokumentace -->
<div class="photo-frame">
  <div class="photo-frame__header">
    <div class="photo-frame__title">Fotodokumentace</div>
    <button type="button" id="openPhotoModal" class="btn-photo">üì∏ Nahr√°t fotografie</button>
  </div>
  <div class="photo-frame__info">Max. 5 fotografi√≠ (JPG, PNG, HEIC)</div>
  <div id="photoPreviewMain" class="photo-preview-main"></div>
</div>

<!-- Modal nahr√°v√°n√≠ -->
<div id="photoModal" class="photo-modal">
  <div class="photo-modal-content">
    <h3>Nahr√°t fotografie</h3>
    <p class="photo-small">
      M≈Ø≈æe≈° nahr√°t a≈æ 5 fotografi√≠ (JPG, PNG, HEIC).  
      Ka≈æd√° se automaticky zmen≈°√≠ na max. 800 √ó 533 px (‚â§ 500 KB).
    </p>

    <div id="photoPreview" class="photo-preview"></div>

    <div class="photo-modal-actions">
      <button type="button" id="selectFiles" class="btn-gray">Vyber soubory</button>
      <input type="file" id="photoInput" accept="image/jpeg,image/png,image/heic" multiple hidden>
      <button type="button" id="closePhotoModal" class="btn-white">Zav≈ô√≠t</button>
    </div>
  </div>
</div>

<style>
/* üñºÔ∏è R√°m fotodokumentace */
.photo-frame{
  border:1px solid rgba(255,255,255,0.1);
  border-radius:14px;
  padding:18px;
  margin-top:20px;
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(10px);
  box-shadow:inset 0 0 10px rgba(0,0,0,0.3);
}
.photo-frame__header{
  display:flex;justify-content:space-between;align-items:center;
}
.photo-frame__title{
  font-weight:700;font-size:1.05em;color:#fff;
}
.btn-photo{
  padding:8px 18px;
  border-radius:10px;
  border:none;
  background:linear-gradient(135deg,#7b68ee,#00bfff);
  color:#fff;font-weight:600;cursor:pointer;
  box-shadow:0 0 15px rgba(0,191,255,0.4);
  transition:transform .15s ease,opacity .2s;
}
.btn-photo:hover{transform:scale(1.05);opacity:0.9;}
.photo-frame__info{font-size:0.8em;color:#bbb;margin-top:4px;}
.photo-preview-main{display:flex;flex-direction:column;gap:8px;margin-top:10px;}
.photo-item-main{display:flex;align-items:center;gap:10px;}
.photo-thumb{
  width:80px;height:80px;border-radius:10px;object-fit:cover;
  box-shadow:0 0 10px rgba(0,0,0,0.4);
}
.photo-name{font-size:0.8em;color:#ccc;word-break:break-all;}
.photo-remove{
  background:rgba(255,255,255,0.15);
  border:none;border-radius:50%;
  width:24px;height:24px;
  color:#ff4d4d;
  font-weight:700;
  cursor:pointer;
  transition:transform .2s,background .2s;
}
.photo-remove:hover{transform:scale(1.2);background:rgba(255,255,255,0.25);}

/* üì∏ Modal */
.photo-modal{
  display:none;position:fixed;inset:0;
  background:rgba(0,0,0,0.7);
  justify-content:center;align-items:center;
  backdrop-filter:blur(10px);
  z-index:9999;
}
.photo-modal.active{display:flex;}
.photo-modal-content{
  background:rgba(30,30,40,0.95);
  border-radius:16px;
  padding:24px;
  max-width:700px;width:90%;
  color:#fff;text-align:center;
  box-shadow:0 0 30px rgba(0,0,0,0.6);
}
.photo-small{font-size:0.75em;color:#aaa;margin-bottom:12px;}
.photo-preview{
  display:flex;justify-content:center;gap:12px;flex-wrap:wrap;
  margin:18px 0;
}
.photo-item{
  width:100px;height:100px;border-radius:10px;
  overflow:hidden;position:relative;
  background:rgba(255,255,255,0.1);
  box-shadow:0 0 12px rgba(0,0,0,0.4);
}
.photo-item img{width:100%;height:100%;object-fit:cover;}
.progress-bar{
  position:absolute;bottom:0;left:0;height:5px;
  background:linear-gradient(90deg,#7b68ee,#00bfff);
  width:0%;transition:width .4s ease;
}
.photo-item.processing::after{
  content:"";position:absolute;inset:0;
  background:rgba(255,255,255,0.2);
  animation:pulse 1s infinite;
}
@keyframes pulse{0%{opacity:.5;}50%{opacity:1;}100%{opacity:.5;}}
.photo-modal-actions{
  display:flex;justify-content:space-between;gap:12px;
}
.btn-gray,.btn-white{
  flex:1;text-align:center;padding:10px 12px;
  border-radius:10px;font-weight:600;cursor:pointer;font-size:0.95em;
  height:44px;transition:transform .15s ease;
}
.btn-gray{
  background:linear-gradient(135deg,#777,#999);
  color:#fff;border:none;
}
.btn-white{
  background:linear-gradient(135deg,#fff,#f5f5f5);
  color:#333;border:none;
}
.btn-gray:hover,.btn-white:hover{transform:scale(1.05);}
</style>

<script>
const selectFiles=document.getElementById("selectFiles");
const photoInput=document.getElementById("photoInput");
const photoModal=document.getElementById("photoModal");
const photoPreview=document.getElementById("photoPreview");
const photoPreviewMain=document.getElementById("photoPreviewMain");

window.uploadedPhotos=[];
selectFiles.addEventListener("click",()=>photoInput.click());

photoInput.addEventListener("change",async()=>{
  const files=Array.from(photoInput.files);
  if(!files.length)return;
  photoModal.classList.add("active");
  photoPreview.innerHTML="";
  for(const file of files.slice(0,5)){
    const img=document.createElement("img");
    const wrap=document.createElement("div");
    const bar=document.createElement("div");
    wrap.className="photo-item processing";
    bar.className="progress-bar";
    wrap.append(img,bar);
    photoPreview.append(wrap);
    const reader=new FileReader();
    reader.onload=e=>img.src=e.target.result;
    reader.readAsDataURL(file);
    const blob=await compressImage(file);
    await uploadAndPreview(blob,file,wrap,img);
  }
  photoModal.classList.remove("active");
  renderMainPreview();
});

async function compressImage(file,maxSizeKB=500,maxDim=800){
  const img=await createImageBitmap(file);
  const canvas=document.createElement("canvas");
  let[w,h]=[img.width,img.height];
  if(w>h&&w>maxDim){h=Math.round(h*(maxDim/w));w=maxDim;}
  else if(h>w&&h>maxDim){w=Math.round(w*(maxDim/h));h=maxDim;}
  canvas.width=w;canvas.height=h;
  const ctx=canvas.getContext("2d");
  ctx.drawImage(img,0,0,w,h);
  let q=0.9;
  let blob=await new Promise(r=>canvas.toBlob(r,"image/jpeg",q));
  while(blob.size/1024>maxSizeKB&&q>0.4){
    q-=0.1;
    blob=await new Promise(r=>canvas.toBlob(r,"image/jpeg",q));
  }
  return blob;
}

async function uploadAndPreview(blob,file,wrap,img){
  const formData=new FormData();
  formData.append("file",blob,file.name);
  try{
    const r=await fetch("https://wgs-token.72nvwf4pb2.workers.dev/upload",{method:"POST",body:formData});
    const res=await r.json();
    wrap.classList.remove("processing");
    wrap.querySelector(".progress-bar").style.width="100%";
    window.uploadedPhotos.push({filename:res.filename,name:file.name,preview:img.src});
  }catch(err){console.error("‚ùå Upload selhal:",err);}
}

function renderMainPreview(){
  photoPreviewMain.innerHTML="";
  window.uploadedPhotos.forEach((p,index)=>{
    const row=document.createElement("div");
    row.className="photo-item-main";
    const img=document.createElement("img");
    img.className="photo-thumb";img.src=p.preview;
    const name=document.createElement("div");
    name.className="photo-name";name.textContent=p.name;
    const remove=document.createElement("button");
    remove.className="photo-remove";remove.textContent="√ó";
    remove.onclick=()=>{window.uploadedPhotos.splice(index,1);renderMainPreview();};
    row.append(img,name,remove);
    photoPreviewMain.append(row);
  });
}
</script>
<!-- üü£ KONEC ƒå√ÅSTI 3/10 -->
<!-- üü£ ZAƒå√ÅTEK ƒå√ÅSTI 4/10 ‚Äì SEKCE ZADAVATEL (modern√≠ styl) -->

<label>Objedn√°vku zpracoval:</label>
<select id="zpracoval" name="zpracoval" required class="glass-select">
  <option value="">Vyber...</option>
  <option value="Natuzzi Editions - Strejcek">Natuzzi Editions ‚Äì Strejcek</option>
  <option value="Natuzzi Editions - Vimrova">Natuzzi Editions ‚Äì Vimrov√°</option>
  <option value="Natuzzi Italia - Bratislava">Natuzzi Italia ‚Äì Bratislava</option>
  <option value="Natuzzi Italia - Jama">Natuzzi Italia ‚Äì Jama</option>
  <option value="Natuzzi Italia - SOHO">Natuzzi Italia ‚Äì SOHO</option>
  <option value="Softaly - SOHO">Softaly ‚Äì SOHO</option>
  <option value="Phase - Klucarova">Phase ‚Äì Klucarova</option>
  <option value="Phase - Jancova">Phase ‚Äì Jancova</option>
  <option value="Jin√°">Jin√°</option>
</select>

<!-- üß© Skryt√° sekce pro vlastn√≠ zadavatele -->
<div id="jinaSekce" class="jina-sekce">
  <label>Zadej nov√Ω zadavatele:</label>
  <input type="text" id="jinaJmeno" name="jinaJmeno" placeholder="Jm√©no zadavatele" />
  <label>E-mail zadavatele:</label>
  <input type="email" id="jinaEmail" name="jinaEmail" placeholder="nap≈ô. zadavatel@firma.cz" />
  <label>Telefon zadavatele:</label>
  <input type="tel" id="jinaTelefon" name="jinaTelefon" placeholder="nap≈ô. 777 123 456" />
</div>

<style>
/* üíé Glass styl pro select */
.glass-select{
  background:rgba(255,255,255,0.08);
  border:none;
  border-radius:10px;
  padding:12px;
  color:#fff;
  font-size:1em;
  width:100%;
  appearance:none;
  box-shadow:inset 0 0 8px rgba(0,0,0,0.3);
  cursor:pointer;
}
.glass-select:focus{box-shadow:0 0 0 2px #7b68eeaa;}
.glass-select option{background:#1e1e2a;color:#fff;}

/* üßä Skryt√° sekce ‚Äì glass panel */
.jina-sekce{
  display:none;
  margin-top:18px;
  padding:18px;
  border-radius:12px;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.1);
  box-shadow:inset 0 0 10px rgba(0,0,0,0.3);
}
.jina-sekce input{
  margin-bottom:10px;
  background:rgba(255,255,255,0.08);
  color:#fff;
  border:none;
  border-radius:10px;
  padding:10px;
  width:100%;
  box-shadow:inset 0 0 6px rgba(0,0,0,0.4);
}
.jina-sekce input:focus{box-shadow:0 0 0 2px #00bfff88;}
</style>

<script>
(function(){
  const selectZpracoval=document.getElementById("zpracoval");
  const jinaSekce=document.getElementById("jinaSekce");
  const jinaInputs=jinaSekce.querySelectorAll("input");
  selectZpracoval.addEventListener("change",()=>{
    if(selectZpracoval.value==="Jin√°"){
      jinaSekce.style.display="block";
      jinaSekce.classList.add("fadeIn");
      jinaInputs.forEach(i=>i.required=true);
    }else{
      jinaSekce.style.display="none";
      jinaInputs.forEach(i=>{i.required=false;i.value="";});
    }
  });
})();
</script>

<!-- üü£ KONEC ƒå√ÅSTI 4/10 ‚Äì SEKCE ZADAVATEL -->
<!-- üü£ ZAƒå√ÅTEK ƒå√ÅSTI 5/10 ‚Äì ODESL√ÅN√ç FORMUL√Å≈òE + ANIMACE (modern√≠ styl) -->

<!-- üíæ Overlay naƒç√≠t√°n√≠ -->
<div class="wait-overlay" id="waitOverlay">
  <div class="hourglass"></div>
  <p>Odes√≠l√°m data, pros√≠m ƒçekejte‚Ä¶</p>
</div>

<!-- ‚úÖ Hotovo animace -->
<div class="success-check" id="successCheck">
  <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
    <defs>
      <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#00d084;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#00a86b;stop-opacity:1" />
      </linearGradient>
    </defs>
    <circle cx="26" cy="26" r="25" fill="none"/>
    <path fill="none" d="M14 27l7 7 16-16" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
  <div class="check-text">Reklamace byla √∫spƒõ≈°nƒõ odesl√°na</div>
</div>

<style>
/* ‚è≥ ƒåekac√≠ overlay */
.wait-overlay{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(20,20,30,0.8);
  backdrop-filter:blur(8px);
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:#fff;
  font-weight:600;
  font-size:1.1em;
  z-index:3000;
}
.wait-overlay.active{display:flex;}
.hourglass{
  border:5px solid rgba(255,255,255,0.2);
  border-top:5px solid #00bfff;
  border-radius:50%;
  width:50px;height:50px;
  animation:spin 1s linear infinite;
  margin-bottom:12px;
}
@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}

/* ‚úÖ Fajfka potvrzen√≠ */
.success-check{
  display:none;
  position:fixed;
  inset:0;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  background:rgba(20,20,30,0.85);
  backdrop-filter:blur(10px);
  z-index:3100;
  color:#fff;
  text-align:center;
  font-weight:600;
  letter-spacing:0.5px;
}
.success-check.active{display:flex;}
.checkmark{
  width:90px;height:90px;stroke-width:3;
  stroke:url(#grad1);fill:none;
  stroke-dasharray:48;stroke-dashoffset:48;
  animation:draw 1s ease forwards;
  margin-bottom:14px;
}
@keyframes draw{to{stroke-dashoffset:0;}}
.check-text{
  font-size:1em;
  color:#aee8c8;
  animation:fadeUp 1.2s ease both;
}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

/* üéõÔ∏è Animace bliknut√≠ √∫spƒõchu */
.success-check.active .checkmark{
  filter:drop-shadow(0 0 12px rgba(0,255,150,0.5));
}
</style>

<script>
document.addEventListener("DOMContentLoaded",()=>{
  const form=document.getElementById("reklamaceForm");
  const wait=document.getElementById("waitOverlay");
  const success=document.getElementById("successCheck");
  const predvolba=document.getElementById("predvolba");

  if(!form){console.error("‚ùå Formul√°≈ô #reklamaceForm nenalezen!");return;}
  console.log("‚úÖ Form listener aktivn√≠.");

  form.addEventListener("submit",async(e)=>{
    e.preventDefault();
    wait.classList.add("active");

    const f=e.target;
    const dataObj={
      type:"reklamace",
      contract:f.zpracoval.value,
      cislo:f.cislo.value.trim().toUpperCase(),
      zakaznik:f.zakaznik.value,
      adresa:`${f.ulice.value}, ${f.mesto.value}, ${f.psc.value}`,
      telefon:`${predvolba.value} ${f.telefon.value}`,
      email:f.email.value,
      produkt:f.produkt.value,
      datum_prodeje:f.datum_prodeje.value||"",
      datum_reklamace:f.datum_reklamace.value||"",
      popis:f.popis.value,
      fotky:(window.uploadedPhotos||[]).map(p=>p.filename||"")
    };

    try{
      const res=await fetch("https://wgs-token.72nvwf4pb2.workers.dev/temporaryfiles",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({record:dataObj})
      });
      const json=await res.json();
      console.log("üì§ Worker odpovƒõƒè:",json);

      wait.classList.remove("active");
      success.classList.add("active");

      // po 2,5 sekund√°ch p≈ôesmƒõrov√°n√≠
      setTimeout(()=>window.location.href="seznam.html",2500);
    }catch(err){
      wait.classList.remove("active");
      alert("‚ùå Chyba p≈ôi odes√≠l√°n√≠: "+err.message);
    }
  });
});
</script>

<!-- üü£ KONEC ƒå√ÅSTI 5/10 ‚Äì ODESL√ÅN√ç FORMUL√Å≈òE + ANIMACE -->
<!-- üü£ ZAƒå√ÅTEK ƒå√ÅSTI 6/10 ‚Äì SPODN√ç AKƒåN√ç TLAƒå√çTKA -->

<div class="actions">
  <a href="index.html" class="btn-glass back">‚üµ Zpƒõt</a>
  <button type="submit" class="btn-glass send">Odeslat</button>
</div>

<style>
.actions{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:16px;
  margin-top:35px;
  flex-wrap:wrap;
}

/* ‚ú® Sklenƒõn√© tlaƒç√≠tko s neon p≈ôechodem */
.btn-glass{
  position:relative;
  display:inline-flex;
  justify-content:center;
  align-items:center;
  padding:14px 32px;
  border-radius:14px;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.5px;
  cursor:pointer;
  border:none;
  font-size:1em;
  text-decoration:none;
  color:#fff;
  background:rgba(255,255,255,0.06);
  box-shadow:
    inset 0 0 8px rgba(255,255,255,0.15),
    0 0 15px rgba(123,104,238,0.4);
  backdrop-filter:blur(12px);
  transition:all 0.25s ease;
}

/* üü£ Hover efekt ‚Äì rozsv√≠cen√≠ */
.btn-glass:hover{
  background:linear-gradient(135deg,#7b68ee,#00bfff);
  transform:scale(1.05);
  box-shadow:
    0 0 25px rgba(123,104,238,0.6),
    0 0 40px rgba(0,191,255,0.4);
}

/* üîµ Odeslat = v√Ωraznƒõj≈°√≠ */
.btn-glass.send{
  background:linear-gradient(135deg,#00b56a,#00da80);
  box-shadow:
    inset 0 0 8px rgba(255,255,255,0.2),
    0 0 18px rgba(0,255,170,0.4);
}
.btn-glass.send:hover{
  box-shadow:
    0 0 25px rgba(0,255,170,0.6),
    0 0 45px rgba(0,191,255,0.5);
}

/* üîò Zpƒõt = decentnƒõj≈°√≠ */
.btn-glass.back{
  background:linear-gradient(135deg,#555,#777);
  box-shadow:inset 0 0 6px rgba(255,255,255,0.15);
}
.btn-glass.back:hover{
  box-shadow:0 0 20px rgba(255,255,255,0.25);
}
</style>

<!-- üü£ KONEC ƒå√ÅSTI 6/10 ‚Äì SPODN√ç AKƒåN√ç TLAƒå√çTKA -->
<!-- üü£ ZAƒå√ÅTEK ƒå√ÅSTI 7/10 ‚Äì MAPA GEOAPIFY (modern√≠ styl) -->

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  crossorigin=""
/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

<style>
#mapPreview{
  width:100%;
  height:260px;
  margin-top:14px;
  border-radius:14px;
  overflow:hidden;
  box-shadow:0 0 20px rgba(0,0,0,0.6);
  background:rgba(0,0,0,0.4);
  backdrop-filter:blur(6px);
  border:1px solid rgba(255,255,255,0.1);
}
.suggestions{
  position:absolute;
  top:100%;left:0;width:100%;
  background:rgba(25,25,35,0.95);
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.1);
  box-shadow:0 8px 20px rgba(0,0,0,0.4);
  z-index:1000;
  max-height:200px;
  overflow-y:auto;
}
.suggestions div{
  padding:10px 12px;
  color:#eee;
  cursor:pointer;
  border-bottom:1px solid rgba(255,255,255,0.05);
  transition:background 0.2s ease;
}
.suggestions div:hover{background:rgba(123,104,238,0.2);}
</style>

<script>
(function(){
  const uliceInput=document.getElementById("ulice");
  const mestoInput=document.getElementById("mesto");
  const pscInput=document.getElementById("psc");
  const suggestionContainer=document.getElementById("suggestions");
  const GEOAPIFY_KEY="b363199bb14e47189558d03b81ca9ba1";
  let suggestTimer=null;

  // üß† Odlo≈æen√© vol√°n√≠ autocomplete
  uliceInput.addEventListener("input",()=>{
    clearTimeout(suggestTimer);
    suggestTimer=setTimeout(runAutocomplete,300);
  });

  async function runAutocomplete(){
    const query=uliceInput.value.trim();
    suggestionContainer.innerHTML="";
    if(!query||query.length<3)return;

    try{
      const url=`https://api.geoapify.com/v1/geocode/autocomplete?text=${encodeURIComponent(query)}&lang=cs&limit=5&apiKey=${GEOAPIFY_KEY}`;
      const res=await fetch(url);
      const data=await res.json();
      if(data.features?.length){renderSuggestions(data.features.map(f=>f.properties));}
      else throw new Error("No results");
    }catch(err){
      console.warn("Geoapify selhalo:",err.message);
      try{
        const url2=`https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&countrycodes=cz,sk,at&limit=5&q=${encodeURIComponent(query)}`;
        const res2=await fetch(url2,{headers:{"Accept-Language":"cs"}});
        const data2=await res2.json();
        if(data2.length){
          renderSuggestions(data2.map(n=>({
            formatted:n.display_name,
            street:n.address?.road,
            housenumber:n.address?.house_number,
            city:n.address?.city||n.address?.town||n.address?.village,
            postcode:n.address?.postcode,
            lat:n.lat,lon:n.lon
          })));
        }else suggestionContainer.innerHTML="<div style='padding:8px;color:#aaa;'>≈Ω√°dn√© v√Ωsledky</div>";
      }catch(fallbackErr){
        suggestionContainer.innerHTML="<div style='padding:8px;color:#f66;'>Chyba naƒç√≠t√°n√≠ adres</div>";
      }
    }
  }

  function renderSuggestions(items){
    suggestionContainer.innerHTML="";
    items.forEach(p=>{
      const div=document.createElement("div");
      div.textContent=p.formatted||p.label||`${p.street||""} ${p.housenumber||""}, ${p.city||""}`;
      div.onclick=()=>{
        uliceInput.value=`${p.street||""} ${p.housenumber||""}`.trim();
        mestoInput.value=p.city||"";
        pscInput.value=p.postcode||"";
        suggestionContainer.innerHTML="";
        showMap(p.lat,p.lon);
      };
      suggestionContainer.appendChild(div);
    });
  }

  function showMap(lat,lon){
    const mapDiv=document.getElementById("mapPreview");
    mapDiv.innerHTML="";
    const map=L.map(mapDiv,{center:[lat,lon],zoom:15,zoomControl:false,attributionControl:false});
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(map);

    const glowIcon=L.divIcon({
      html:`<div style="width:16px;height:16px;border-radius:50%;background:#00bfff;box-shadow:0 0 15px #00bfff88;"></div>`,
      className:""
    });
    L.marker([lat,lon],{icon:glowIcon}).addTo(map);
    setTimeout(()=>map.invalidateSize(),300);
  }

  document.addEventListener("click",e=>{
    if(!suggestionContainer.contains(e.target)&&e.target!==uliceInput)
      suggestionContainer.innerHTML="";
  });
})();
</script>

<!-- üü£ KONEC ƒå√ÅSTI 7/10 ‚Äì MAPA GEOAPIFY (modern√≠ styl) -->
<!-- üü£ ZAƒå√ÅTEK ƒå√ÅSTI 8/10 ‚Äì DOPL≈áKOV√â UI STYLY (modern√≠ glass styl) -->

<style>
body{
  font-family:"Inter",system-ui,sans-serif;
  background:radial-gradient(circle at top left,#201b3a 0%,#131324 60%,#0b0b16 100%);
  color:#eee;
  margin:0;
  padding:0;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  min-height:100vh;
  overflow-x:hidden;
}

/* üßä Wrapper ‚Äì sklenƒõn√° karta */
.wrapper{
  background:rgba(255,255,255,0.06);
  backdrop-filter:blur(20px);
  border-radius:18px;
  border:1px solid rgba(255,255,255,0.12);
  box-shadow:0 0 40px rgba(0,0,0,0.4);
  padding:40px;
  margin:40px 20px 80px;
  max-width:740px;
  width:100%;
  animation:fadeSlide 0.8s ease both;
}

/* üß≠ Hlaviƒçky */
h1,h2{
  text-align:center;
  margin:0 0 18px;
  text-shadow:0 0 20px rgba(255,255,255,0.1);
}
h1{
  font-size:2.8em;
  font-weight:900;
  background:linear-gradient(135deg,#00bfff,#7b68ee);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
h2{
  font-size:1.1em;
  font-weight:500;
  color:#ccc;
  margin-bottom:30px;
}

/* üìã Formul√°≈ôov√© prvky */
label{
  display:block;
  font-weight:600;
  color:#d8d8d8;
  margin-top:18px;
  margin-bottom:6px;
}
input,textarea,select{
  width:100%;
  padding:12px 14px;
  font-size:1em;
  color:#fff;
  background:rgba(255,255,255,0.07);
  border:none;
  border-radius:10px;
  box-shadow:inset 0 0 10px rgba(0,0,0,0.4);
  transition:all 0.25s ease;
}
input:focus,textarea:focus,select:focus{
  outline:none;
  box-shadow:0 0 0 2px #7b68ee88,inset 0 0 10px rgba(0,0,0,0.3);
}
textarea{height:110px;resize:vertical;}
small{font-size:0.8em;color:#aaa;}

/* ‚ú® Animace naƒçten√≠ wrapperu */
@keyframes fadeSlide{
  from{opacity:0;transform:translateY(15px);}
  to{opacity:1;transform:translateY(0);}
}

/* üì± Responzivita */
@media(max-width:768px){
  .wrapper{padding:25px 20px;margin:25px 10px;}
  h1{font-size:2em;}
  h2{font-size:1em;}
}

/* üü£ Neon okraje u aktivn√≠ch pol√≠ */
input:focus,textarea:focus{
  border:1px solid #7b68eeaa;
}

/* üü¢ Stav validace */
input:valid,textarea:valid,select:valid{
  border:1px solid rgba(0,255,170,0.4);
}
input:invalid:focus,textarea:invalid:focus{
  border:1px solid rgba(255,80,80,0.5);
}

/* üåü Glow efekt pro zv√Ωraznƒõn√≠ elementu */
input:hover,textarea:hover,select:hover{
  box-shadow:0 0 10px rgba(255,255,255,0.06);
}
</style>

<!-- üü£ KONEC ƒå√ÅSTI 8/10 ‚Äì DOPL≈áKOV√â UI STYLY -->
<!-- üü£ ZAƒå√ÅTEK ƒå√ÅSTI 9/10 ‚Äì OVERLAY ANIMACE + POTVRZEN√ç -->

<!-- üíæ Overlay ƒçek√°n√≠ -->
<div class="wait-overlay" id="waitOverlay">
  <div class="spinner"></div>
  <p>Odes√≠l√°m data‚Ä¶</p>
</div>

<!-- ‚úÖ Overlay potvrzen√≠ -->
<div class="success-check" id="successCheck">
  <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
    <defs>
      <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#00ffae;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#00bfff;stop-opacity:1" />
      </linearGradient>
    </defs>
    <circle cx="26" cy="26" r="25" fill="none"/>
    <path fill="none" d="M14 27l7 7 16-16" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
  <div class="check-text">Odesl√°no √∫spƒõ≈°nƒõ!</div>
</div>

<style>
/* ‚è≥ ƒåekac√≠ overlay */
.wait-overlay{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(15,15,25,0.9);
  backdrop-filter:blur(12px);
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:5000;
  color:#fff;
  font-weight:600;
  letter-spacing:0.5px;
}
.wait-overlay.active{display:flex;}
.spinner{
  border:5px solid rgba(255,255,255,0.1);
  border-top:5px solid #00bfff;
  border-radius:50%;
  width:55px;height:55px;
  animation:spin 1s linear infinite;
  margin-bottom:14px;
}
@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}

/* ‚úÖ √öspƒõ≈°n√© odesl√°n√≠ */
.success-check{
  display:none;
  position:fixed;
  inset:0;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  background:rgba(20,20,30,0.8);
  backdrop-filter:blur(10px);
  z-index:5100;
  color:#fff;
  font-weight:700;
  text-align:center;
}
.success-check.active{display:flex;}
.checkmark{
  width:90px;height:90px;
  stroke:url(#grad1);
  stroke-width:3;
  fill:none;
  stroke-dasharray:48;
  stroke-dashoffset:48;
  animation:draw 1s ease forwards;
  margin-bottom:12px;
  filter:drop-shadow(0 0 10px #00ffae88);
}
.check-text{
  font-size:1.1em;
  color:#aefcd8;
  letter-spacing:0.4px;
  animation:fadeUp 1.2s ease both;
}
@keyframes draw{to{stroke-dashoffset:0;}}
@keyframes fadeUp{
  from{opacity:0;transform:translateY(10px);}
  to{opacity:1;transform:translateY(0);}
}
</style>

<script>
function showOverlay(type="wait"){
  if(type==="wait"){
    document.getElementById("waitOverlay").classList.add("active");
  }else if(type==="success"){
    document.getElementById("waitOverlay").classList.remove("active");
    const s=document.getElementById("successCheck");
    s.classList.add("active");
    setTimeout(()=>s.classList.remove("active"),2500);
  }
}
</script>

<!-- üü£ KONEC ƒå√ÅSTI 9/10 ‚Äì OVERLAY ANIMACE + POTVRZEN√ç -->
<!-- üü£ ZAƒå√ÅTEK ƒå√ÅSTI 10/10 ‚Äì Z√ÅVƒöR STR√ÅNKY + FOOTER + FADE -->

<footer class="footer">
  <div>¬© 2025 White Glove Service s.r.o.</div>
  <div>specializovan√Ω autorizovan√Ω servis Natuzzi</div>
</footer>

<style>
.footer{
  text-align:center;
  color:#999;
  font-size:0.85em;
  padding:30px 0 20px;
  letter-spacing:0.3px;
  opacity:0.7;
  transition:opacity .4s ease;
}
.footer:hover{opacity:1;color:#ccc;}
body.fade-start{opacity:0;}
body.fade-in{
  opacity:1;
  transition:opacity 0.8s ease-in-out;
}
</style>

<script>
// üåÖ Jemn√Ω fade efekt p≈ôi naƒçten√≠
document.body.classList.add("fade-start");
window.addEventListener("load",()=>{
  setTimeout(()=>document.body.classList.add("fade-in"),50);
});
</script>

</div> <!-- konec wrapperu -->
</form>
</body>
</html>

<!-- üü£ KONEC ƒå√ÅSTI 10/10 ‚Äì Z√ÅVƒöR STR√ÅNKY + FOOTER + FADE -->
